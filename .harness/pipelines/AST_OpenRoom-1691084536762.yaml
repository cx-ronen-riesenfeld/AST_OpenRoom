pipeline:
  identifier: Build_AST_OpenRoom_1691084546205
  name: Build AST_OpenRoom
  orgIdentifier: default
  projectIdentifier: default_project
  stages:
    - stage:
        name: Checkmarx One
        identifier: Checkmarx_One
        description: ""
        type: Custom
        spec:
          execution:
            steps:
              - step:
                  type: ShellScript
                  name: ShellScript_1
                  identifier: ShellScript_1
                  spec:
                    shell: Bash
                    onDelegate: false
                    source:
                      type: Inline
                      spec:
                        script: |
                          wget -O ~/../cxcli.gz https://github.com/Checkmarx/ast-cli/releases/download/2.0.53/ast-cli_linux_x64.tar.gz
                          gunzip ~/../cxcli.gz -d ~/../cxcli
                          rm -rf ~/../cxcli.gz
                          tar xvf ~/../ast-cli_linux_x64.tar
                          chmod +x ~/../cxcli/cx 
                          sh ~/../cxcli/cx scan -CxServer http://ronenlab.ngrok.io -CxUser develop1 -CxPassword General123! -ProjectName "CxServer/Mexico/Finanzas/Bookstore" -Preset All -LocationType folder -LocationPath $CI_PROJECT_DIR  -v
                    environmentVariables: []
                    outputVariables: []
                    executionTarget:
                      connectorRef: Container_host_SSH
                      host: 192.168.56.125
                      workingDirectory: /home/ubuntu/harness
                  timeout: 10m
              - step:
                  type: JenkinsBuild
                  name: JenkinsBuild_1
                  identifier: JenkinsBuild_1
                  spec:
                    connectorRef: Jenkins
                    jobName: AST_BookStore
                    jobParameter: []
                    unstableStatusAsSuccess: false
                    useConnectorUrlForJobExecution: true
                  timeout: 1h
        tags: {}
